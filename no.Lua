local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local SoundService = game:GetService("SoundService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "LightningSystem"
screenGui.Parent = playerGui

-- Ø²Ø± ØµØºÙŠØ± ÙÙŠ Ø£Ø¹Ù„Ù‰ ÙŠØ³Ø§Ø± Ø§Ù„Ø´Ø§Ø´Ø©
local smallButton = Instance.new("TextButton")
smallButton.Name = "SmallButton"
smallButton.Size = UDim2.new(0, 40, 0, 40)
smallButton.Position = UDim2.new(0, 10, 0, 10)
smallButton.BackgroundColor3 = Color3.fromRGB(0, 100, 255)
smallButton.TextColor3 = Color3.fromRGB(255, 255, 255)
smallButton.Text = "âš¡"
smallButton.Font = Enum.Font.GothamBold
smallButton.TextSize = 20
smallButton.Parent = screenGui

-- Ø²Ø§ÙˆÙŠØ© Ù…Ø³ØªØ¯ÙŠØ±Ø© Ù„Ù„Ø²Ø±
local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = smallButton

-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Ù…Ø®ÙÙŠØ© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©)
local menuFrame = Instance.new("Frame")
menuFrame.Name = "MenuFrame"
menuFrame.Size = UDim2.new(0, 280, 0, 350)
menuFrame.Position = UDim2.new(0, 50, 0, 10)
menuFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
menuFrame.BorderSizePixel = 0
menuFrame.Visible = false
menuFrame.Parent = screenGui

-- Ø²Ø§ÙˆÙŠØ© Ù…Ø³ØªØ¯ÙŠØ±Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = menuFrame

-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "TitleLabel"
titleLabel.Size = UDim2.new(1, 0, 0, 50)
titleLabel.BackgroundColor3 = Color3.fromRGB(0, 100, 255)
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.Text = "âš¡ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø±Ù‚ v1.0"
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextSize = 18
titleLabel.Parent = menuFrame

-- Ø²Ø§ÙˆÙŠØ© Ù…Ø³ØªØ¯ÙŠØ±Ø© Ù„Ù„Ø¹Ù†ÙˆØ§Ù†
local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 8)
titleCorner.Parent = titleLabel

-- Ø­Ù‚Ù„ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø©
local gameNameBox = Instance.new("TextBox")
gameNameBox.Name = "GameNameBox"
gameNameBox.Size = UDim2.new(0.9, 0, 0, 40)
gameNameBox.Position = UDim2.new(0.05, 0, 0, 70)
gameNameBox.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
gameNameBox.TextColor3 = Color3.fromRGB(255, 255, 255)
gameNameBox.PlaceholderText = "Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø© Ù‡Ù†Ø§..."
gameNameBox.Font = Enum.Font.Gotham
gameNameBox.TextSize = 14
gameNameBox.Parent = menuFrame

local boxCorner = Instance.new("UICorner")
boxCorner.CornerRadius = UDim.new(0, 6)
boxCorner.Parent = gameNameBox

-- Ø²Ø± ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø±Ù‚ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
local lightningButton = Instance.new("TextButton")
lightningButton.Name = "LightningButton"
lightningButton.Size = UDim2.new(0.9, 0, 0, 45)
lightningButton.Position = UDim2.new(0.05, 0, 0, 130)
lightningButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
lightningButton.TextColor3 = Color3.fromRGB(255, 255, 255)
lightningButton.Text = "Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ø±Ù‚ âš¡"
lightningButton.Font = Enum.Font.GothamBold
lightningButton.TextSize = 16
lightningButton.Parent = menuFrame

local lightningButtonCorner = Instance.new("UICorner")
lightningButtonCorner.CornerRadius = UDim.new(0, 8)
lightningButtonCorner.Parent = lightningButton

-- Ù‚Ø³Ù… Ø§Ù„ØµÙŠØ§Ù†Ø©
local maintenanceFrame = Instance.new("Frame")
maintenanceFrame.Name = "MaintenanceFrame"
maintenanceFrame.Size = UDim2.new(0.9, 0, 0, 80)
maintenanceFrame.Position = UDim2.new(0.05, 0, 0, 200)
maintenanceFrame.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
maintenanceFrame.Parent = menuFrame

local maintenanceCorner = Instance.new("UICorner")
maintenanceCorner.CornerRadius = UDim.new(0, 8)
maintenanceCorner.Parent = maintenanceFrame

local maintenanceLabel = Instance.new("TextLabel")
maintenanceLabel.Name = "MaintenanceLabel"
maintenanceLabel.Size = UDim2.new(1, 0, 1, 0)
maintenanceLabel.BackgroundTransparency = 1
maintenanceLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
maintenanceLabel.Text = "ðŸ› ï¸ Ø§Ù„Ù†Ø¸Ø§Ù… Ù‚ÙŠØ¯ Ø§Ù„ØµÙŠØ§Ù†Ø©\n\nØ³ÙŠØªÙ… Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ù‚Ø±ÙŠØ¨Ø§Ù‹"
maintenanceLabel.Font = Enum.Font.GothamBold
maintenanceLabel.TextSize = 14
maintenanceLabel.TextWrapped = true
maintenanceLabel.Parent = maintenanceFrame

-- Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ­ÙƒÙ…
local cooldownActive = false
local cooldownTime = 57
local remainingTime = 0

-- ÙˆØ¸ÙŠÙØ© ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
local function toggleMenu()
    menuFrame.Visible = not menuFrame.Visible
end

-- ÙˆØ¸ÙŠÙØ© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯
local function updateCooldown()
    while cooldownActive and remainingTime > 0 do
        lightningButton.Text = "â³ " .. remainingTime .. "s"
        remainingTime -= 1
        wait(1)
    end
    
    if not cooldownActive then
        lightningButton.Text = "Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ø±Ù‚ âš¡"
        lightningButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
    end
end

-- ÙˆØ¸ÙŠÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¨Ø±Ù‚ Ø¨Ù†Ù…Ø· Ù‡Ø§Ø¯Ø¦
local function startLightningEffect()
    -- Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø¡
    menuFrame.Visible = false
    
    -- ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¨ØµÙˆØª Ù…Ø¹ØªØ¯Ù„
    local music = Instance.new("Sound")
    music.SoundId = "rbxassetid://1836280076"
    music.Volume = 0.7 -- ØµÙˆØª Ù…Ø¹ØªØ¯Ù„
    music.Parent = SoundService
    music:Play()
    
    -- ØªØºÙŠÙŠØ± Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©
    local lighting = game:GetService("Lighting")
    local originalBrightness = lighting.Brightness
    local originalFogEnd = lighting.FogEnd
    local originalAmbient = lighting.Ambient
    
    lighting.Brightness = 0.3
    lighting.FogEnd = 500
    lighting.Ambient = Color3.fromRGB(80, 80, 100)
    
    -- Ù†Ù…Ø· Ø§Ù„Ø¨Ø±Ù‚ Ø§Ù„Ù‡Ø§Ø¯Ø¦: 5 Ø«ÙˆØ§Ù†ÙŠ Ø¨Ø±Ù‚ØŒ 6 ØªÙˆÙ‚ÙØŒ 2 Ø¨Ø±Ù‚ØŒ 6 ØªÙˆÙ‚Ù
    local lightningPattern = {
        -- Ø£ÙˆÙ„ 5 Ø«ÙˆØ§Ù†ÙŠ: Ø¨Ø±Ù‚
        {start = 0, duration = 5, active = true},
        -- ØªÙˆÙ‚Ù 6 Ø«ÙˆØ§Ù†ÙŠ
        {start = 5, duration = 6, active = false},
        -- Ø¨Ø±Ù‚ 2 Ø«ÙˆØ§Ù†ÙŠ
        {start = 11, duration = 2, active = true},
        -- ØªÙˆÙ‚Ù 6 Ø«ÙˆØ§Ù†ÙŠ
        {start = 13, duration = 6, active = false},
        -- Ø¨Ø±Ù‚ 6 Ø«ÙˆØ§Ù†ÙŠ
        {start = 19, duration = 6, active = true},
        -- ØªÙˆÙ‚Ù 5 Ø«ÙˆØ§Ù†ÙŠ
        {start = 25, duration = 5, active = false},
        -- Ø¨Ø±Ù‚ 4 Ø«ÙˆØ§Ù†ÙŠ
        {start = 30, duration = 4, active = true},
        -- ØªÙˆÙ‚Ù 4 Ø«ÙˆØ§Ù†ÙŠ
        {start = 34, duration = 4, active = false},
        -- Ø¨Ø±Ù‚ 3 Ø«ÙˆØ§Ù†ÙŠ
        {start = 38, duration = 3, active = true},
        -- ØªÙˆÙ‚Ù 5 Ø«ÙˆØ§Ù†ÙŠ
        {start = 41, duration = 5, active = false},
        -- Ø¨Ø±Ù‚ 4 Ø«ÙˆØ§Ù†ÙŠ
        {start = 46, duration = 4, active = true},
        -- ØªÙˆÙ‚Ù 3 Ø«ÙˆØ§Ù†ÙŠ
        {start = 50, duration = 3, active = false},
        -- Ø¨Ø±Ù‚ 4 Ø«ÙˆØ§Ù†ÙŠ Ø£Ø®ÙŠØ±Ø©
        {start = 53, duration = 4, active = true}
    }
    
    local function createLightning()
        -- ØµÙˆØª Ø§Ù„Ø¨Ø±Ù‚ Ø¨ØµÙˆØª Ù…Ø¹ØªØ¯Ù„
        local thunderSound = Instance.new("Sound")
        thunderSound.SoundId = "rbxassetid://1079408535"
        thunderSound.Volume = 0.6 -- ØµÙˆØª Ù…Ø¹ØªØ¯Ù„
        thunderSound.Parent = SoundService
        thunderSound:Play()
        
        -- ÙÙ„Ø§Ø´ Ø¶ÙˆØ¦ÙŠ Ø®ÙÙŠÙ
        local flash = Instance.new("SurfaceLight")
        flash.Brightness = 40
        flash.Range = 100
        flash.Color = Color3.fromRGB(180, 200, 255)
        flash.Parent = lighting
        
        -- ØªØ£Ø«ÙŠØ± Ø¥Ø¶Ø§ÙÙŠ Ø®ÙÙŠÙ
        lighting.Ambient = Color3.fromRGB(120, 120, 180)
        
        wait(0.2)
        flash:Destroy()
        lighting.Ambient = Color3.fromRGB(80, 80, 100)
    end
    
    -- ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø±Ù‚ Ø­Ø³Ø¨ Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù…Ø­Ø¯Ø¯
    local startTime = tick()
    local endTime = startTime + cooldownTime
    
    local connection
    connection = RunService.Heartbeat:Connect(function()
        local currentTime = tick()
        local elapsed = currentTime - startTime
        
        if currentTime >= endTime then
            connection:Disconnect()
            -- Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©
            lighting.Brightness = originalBrightness
            lighting.FogEnd = originalFogEnd
            lighting.Ambient = originalAmbient
            music:Stop()
            cooldownActive = false
            return
        end
        
        -- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ø²Ù…Ù†ÙŠ Ù„Ù„Ø¨Ø±Ù‚
        for _, pattern in ipairs(lightningPattern) do
            if elapsed >= pattern.start and elapsed < pattern.start + pattern.duration then
                -- Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‡Ø°Ù‡ ÙØªØ±Ø© Ø¨Ø±Ù‚ØŒ Ù†Ù†Ø²Ù„ Ø¨Ø±Ù‚ Ø®ÙÙŠÙ
                if pattern.active and math.random(1, 3) == 1 then -- Ø¨Ø±Ù‚ ÙƒÙ„ 3 Ø¥Ø·Ø§Ø±Ø§Øª ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹
                    spawn(createLightning)
                end
                break
            end
        end
    end)
    
    -- Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ø±Ù‚ ÙÙˆØ±Ø§Ù‹
    spawn(function()
        wait(1)
        createLightning()
    end)
end

-- Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù†Ù‚Ø±
smallButton.MouseButton1Click:Connect(toggleMenu)

lightningButton.MouseButton1Click:Connect(function()
    if cooldownActive then return end
    
    cooldownActive = true
    remainingTime = cooldownTime
    
    -- Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª
    spawn(updateCooldown)
    spawn(startLightningEffect)
    
    -- ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²Ø± Ù…Ø¤Ù‚ØªØ§Ù‹
    lightningButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
end)

-- Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
local function closeMenuOnClickOutside(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local mouse = game:GetService("Players").LocalPlayer:GetMouse()
        local buttonPos = smallButton.AbsolutePosition
        local buttonSize = smallButton.AbsoluteSize
        local menuPos = menuFrame.AbsolutePosition
        local menuSize = menuFrame.AbsoluteSize
        
        local x, y = mouse.X, mouse.Y
        
        -- Ø¥Ø°Ø§ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ø²Ø± ÙˆØ§Ù„Ù‚Ø§Ø¦Ù…Ø©
        if not (x >= buttonPos.X and x <= buttonPos.X + buttonSize.X and y >= buttonPos.Y and y <= buttonPos.Y + buttonSize.Y) and
           not (x >= menuPos.X and x <= menuPos.X + menuSize.X and y >= menuPos.Y and y <= menuPos.Y + menuSize.Y) then
            menuFrame.Visible = false
        end
    end
end

game:GetService("UserInputService").InputBegan:Connect(closeMenuOnClickOutside)

print("ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø±Ù‚ Ø¨Ù†Ø¬Ø§Ø­! v1.0 - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù‡Ø§Ø¯Ø¦Ø©")
